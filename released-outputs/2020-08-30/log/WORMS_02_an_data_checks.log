------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  E:\will\school-age-children-and-covid\analysis\log\WORMS_02_an_data_checks.log
  log type:  text
 opened on:  26 Aug 2020, 19:56:13

. 
. * Open Stata dataset
. use $tempdir\analysis_dataset_worms, clear

. 
. *run ssc install if not on local machine - server needs datacheck.ado file
. *ssc install datacheck 
. 
. *Duplicate patient check
. datacheck _n==1, by(patient_id) nol

. 
. 
. /* CHECK INCLUSION AND EXCLUSION CRITERIA=====================================*/ 
. 
. * DATA STRUCTURE: Confirm one row per patient 
. duplicates tag patient_id, generate(dup_check)

Duplicates in terms of patient_id

. assert dup_check == 0 

. drop dup_check

. 
. * INCLUSION 1: >=18 and <=110 at 1 March 2020 
. assert age < .

. assert age >= 18 

. assert age <= 110

.  
. * INCLUSION 2: M or F gender at 1 March 2020 
. assert inlist(sex, "M", "F")

. 
. * EXCLUDE 1:  MISSING IMD
. assert inlist(imd, 1, 2, 3, 4, 5)

. 
. * EXCLUDE 2:  HH with more than 10 people
. datacheck inlist(household_size, 1, 2, 3, 4, 5,6, 7, 8, 9, 10), nol

. 
. /* EXPECTED VALUES============================================================*/ 
. 
. *HH
. datacheck kids_cat3<., nol

. datacheck inlist(kids_cat3, 0,1, 2), nol

. 
. datacheck number_kids<., nol

. datacheck inlist(number_kids, 0,1,2,3,4,5,6,7,8,9), nol

. 
. * Age
. datacheck age<., nol

. datacheck inlist(agegroup, 1, 2, 3, 4, 5, 6,7), nol

. datacheck inlist(age66, 0, 1), nol

. 
. * Sex
. datacheck inlist(male, 0, 1), nol

. 
. * BMI 
. datacheck inlist(obese4cat, 1, 2, 3, 4), nol

. datacheck inlist(bmicat, 1, 2, 3, 4, 5, 6, .u), nol

. 
. * IMD
. datacheck inlist(imd, 1, 2, 3, 4, 5), nol

. 
. * Ethnicity
. datacheck inlist(ethnicity, 1, 2, 3, 4, 5, .u), nol

. 
. * Smoking
. datacheck inlist(smoke, 1, 2, 3, .u), nol

. datacheck inlist(smoke_nomiss, 1, 2, 3), nol 

. 
. 
. * Check date ranges for all comorbidities 
. 
. foreach var of varlist  chronic_respiratory_disease     ///
>                                         chronic_cardiac_disease         ///
>                                         chronic_liver_disease           ///
>                                         other_neuro                     ///
>                                         stroke_dementia ///
>                                         ra_sle_psoriasis                                ///
>                                         perm_immunodef  ///
>                                         temp_immunodef  ///
>                                         other_transplant                        /// 
>                                         asplenia                        /// 
>                                         hypertension                            ///
>                                         {
  2.                                                 
.         summ `var'_date, format
  3. 
. }

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_r~te |    634,361   23apr2009    6332.691  15dec1899  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_c~te |  1,049,177   23jan2007    6521.423  15jan1840  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_l~te |     92,988   13oct2009    6281.529  15dec1840  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
other_neur~e |    148,191   14mar2002    7984.569  15dec1899  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
stroke_dem~e |    344,962   07sep2010    5324.756  15dec1899  15jul2096

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
ra_sle_pso~e |    775,435   21apr2002    7333.775  15jan1840  15mar3000

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
perm_immun~e |     38,083   11mar2008    6176.133  15jan1900  15jan2019

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
temp_immun~e |      3,952   06sep2018     100.571  15feb2018  15jan2019

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
other_tran~e |      3,880   18jan2008    4743.631  15jan1900  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
asplenia_d~e |     21,983   05nov1992    9034.778  15dec1899  15aug2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hypertensi~e |  3,238,069   22sep2004    7176.449  15jan1800  15feb2058

. 
. foreach comorb in $varlist { 
  2. 
.         local comorb: subinstr local comorb "i." ""
  3.         safetab `comorb', m
  4.         
. }

. 
. * Outcome dates
. summ  worms, format

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
       worms | 14,769,955    .0141787    .1182272          0          1

. 
. 
. /* LOGICAL RELATIONSHIPS======================================================*/ 
. 
. *HH variables
. safetab kids_cat3 tot_adults_hh
0

  Presence of |
  children or |
 young people |
       in the |    Total number adults in hh
    household |         1          2          3 |     Total
--------------+---------------------------------+----------
      No kids | 3,374,347  4,290,868  2,904,048 |10,569,263 
Kids under 12 |   475,340  1,723,430    882,182 | 3,080,952 
Kids under 18 |   133,103    460,042    526,595 | 1,119,740 
--------------+---------------------------------+----------
        Total | 3,982,790  6,474,340  4,312,825 |14,769,955 

. safetab number_kids tot_adults_hh
0

**TABLE OF number_kids tot_adults_hh REDACTED DUE TO SMALL N**


. safetab household_size tot_adults_hh
0

    Number |
 people in |    Total number adults in hh
 household |         1          2          3 |     Total
-----------+---------------------------------+----------
         1 | 3,204,097          0          0 | 3,204,097 
         2 |   408,396  4,082,966          0 | 4,491,362 
         3 |   248,433    953,012  1,615,788 | 2,817,233 
         4 |    84,142  1,005,514  1,216,068 | 2,305,724 
         5 |    26,064    309,206    689,976 | 1,025,246 
         6 |     7,774     87,190    383,696 |   478,660 
         7 |     2,568     25,184    211,821 |   239,573 
         8 |       903      8,250    122,375 |   131,528 
         9 |       413      3,018     73,101 |    76,532 
-----------+---------------------------------+----------
     Total | 3,982,790  6,474,340  4,312,825 |14,769,955 

. 
. * BMI
. bysort bmicat: summ bmi

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Underweight (<18.5)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    260,347    17.42998    .8270204         15       18.4

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Normal (18.5-24.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  4,154,735    22.38168    1.707625       18.5       24.9

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Overweight (25-29.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  4,099,397    27.27566    1.413654         25       29.9

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese I (30-34.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  2,092,814    32.08581    1.417218         30       34.9

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese II (35-39.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    814,734    37.05279    1.407121         35       39.9

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese III (40+)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    412,820    43.39605    2.639318         40         50

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Unknown (.u)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |          0


. safetab bmicat obese4cat, m
17

                     |     Evidence of obesity (4 categories)
         Grouped BMI | No record  Obese I (  Obese II   Obese III |     Total
---------------------+--------------------------------------------+----------
 Underweight (<18.5) |   260,347          0          0          0 |   260,347 
  Normal (18.5-24.9) | 4,154,735          0          0          0 | 4,154,735 
Overweight (25-29.9) | 4,099,397          0          0          0 | 4,099,397 
   Obese I (30-34.9) |         0  2,092,814          0          0 | 2,092,814 
  Obese II (35-39.9) |         0          0    814,734          0 |   814,734 
     Obese III (40+) |         0          0          0    412,820 |   412,820 
        Unknown (.u) | 2,935,108          0          0          0 | 2,935,108 
---------------------+--------------------------------------------+----------
               Total |11,449,587  2,092,814    814,734    412,820 |14,769,955 

. 
. * Age
. bysort agegroup: summ age

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 18-<30

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,670,619    23.88481    3.428816         18         29

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 30-<40

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,614,399    34.47193    2.872834         30         39

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 40-<50

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,419,176    44.62353    2.891308         40         49

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 50-<60

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,544,813    54.39914    2.841572         50         59

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 60-<70

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,053,199    64.36027    2.897797         60         69

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 70-<80

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  1,628,608    73.86001    2.800844         70         79

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 80+

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |    839,141    84.77966    4.072501         80        110


. safetab agegroup age66, m
15

   Grouped |  66 years and older
       age |         0          1 |     Total
-----------+----------------------+----------
    18-<30 | 2,670,619          0 | 2,670,619 
    30-<40 | 2,614,399          0 | 2,614,399 
    40-<50 | 2,419,176          0 | 2,419,176 
    50-<60 | 2,544,813          0 | 2,544,813 
    60-<70 | 1,466,461    586,738 | 2,053,199 
    70-<80 |         0  1,628,608 | 1,628,608 
       80+ |         0    839,141 |   839,141 
-----------+----------------------+----------
     Total |11,715,468  3,054,487 |14,769,955 

. 
. * Smoking
. safetab smoke smoke_nomiss, m
19

             |  Smoking status (missing set to
     Smoking |               non)
      status |     Never     Former    Current |     Total
-------------+---------------------------------+----------
       Never | 6,793,007          0          0 | 6,793,007 
      Former |         0  4,831,984          0 | 4,831,984 
     Current |         0          0  2,622,947 | 2,622,947 
Unknown (.u) |   522,017          0          0 |   522,017 
-------------+---------------------------------+----------
       Total | 7,315,024  4,831,984  2,622,947 |14,769,955 

. 
. * Diabetes
. *safetab diabcat diabetes, m
. 
. * CKD
. safetab reduced egfr_cat, m
17

       Reduced kidney |                          Calculated eGFR
             function |         0         15         30         45         60          . |     Total
----------------------+------------------------------------------------------------------+----------
                 None |         0          0          0          0  9,997,676  3,906,364 |13,904,040 
Stage 3a/3b egfr 30-6 |         0          0    194,974    616,167          0          0 |   811,141 
    Stage 4/5 egfr<30 |    10,450     44,324          0          0          0          0 |    54,774 
----------------------+------------------------------------------------------------------+----------
                Total |    10,450     44,324    194,974    616,167  9,997,676  3,906,364 |14,769,955 

. 
. 
. /* EXPECTED RELATIONSHIPS=====================================================*/ 
. 
. /*  Relationships between demographic/lifestyle variables  */
. safetab agegroup bmicat,        row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |                            Grouped BMI
       age | Underweig  Normal (1  Overweigh  Obese I (  Obese II   Obese III |     Total
-----------+------------------------------------------------------------------+----------
    18-<30 |    96,752    861,336    416,746    191,756     88,639     53,008 | 1,708,237 
           |      5.66      50.42      24.40      11.23       5.19       3.10 |    100.00 
-----------+------------------------------------------------------------------+----------
    30-<40 |    46,907    823,274    612,383    284,371    120,517     70,604 | 1,958,056 
           |      2.40      42.05      31.28      14.52       6.15       3.61 |    100.00 
-----------+------------------------------------------------------------------+----------
    40-<50 |    24,929    640,590    691,844    356,224    144,385     79,389 | 1,937,361 
           |      1.29      33.07      35.71      18.39       7.45       4.10 |    100.00 
-----------+------------------------------------------------------------------+----------
    50-<60 |    21,928    594,563    797,453    455,315    184,184     95,039 | 2,148,482 
           |      1.02      27.67      37.12      21.19       8.57       4.42 |    100.00 
-----------+------------------------------------------------------------------+----------
    60-<70 |    22,318    502,734    697,037    389,130    147,673     68,390 | 1,827,282 
           |      1.22      27.51      38.15      21.30       8.08       3.74 |    100.00 
-----------+------------------------------------------------------------------+----------
    70-<80 |    23,331    443,297    596,656    299,644     98,677     37,839 | 1,499,444 
           |      1.56      29.56      39.79      19.98       6.58       2.52 |    100.00 
-----------+------------------------------------------------------------------+----------
       80+ |    24,182    288,941    287,278    116,374     30,659      8,551 |   755,985 
           |      3.20      38.22      38.00      15.39       4.06       1.13 |    100.00 
-----------+------------------------------------------------------------------+----------
     Total |   260,347  4,154,735  4,099,397  2,092,814    814,734    412,820 |11,834,847 
           |      2.20      35.11      34.64      17.68       6.88       3.49 |    100.00 

. safetab agegroup smoke,         row  
15

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |          Smoking status
       age |     Never     Former    Current |     Total
-----------+---------------------------------+----------
    18-<30 | 1,467,399    348,835    539,251 | 2,355,485 
           |     62.30      14.81      22.89 |    100.00 
-----------+---------------------------------+----------
    30-<40 | 1,228,007    683,329    617,478 | 2,528,814 
           |     48.56      27.02      24.42 |    100.00 
-----------+---------------------------------+----------
    40-<50 | 1,076,210    772,592    519,710 | 2,368,512 
           |     45.44      32.62      21.94 |    100.00 
-----------+---------------------------------+----------
    50-<60 | 1,160,081    862,230    485,628 | 2,507,939 
           |     46.26      34.38      19.36 |    100.00 
-----------+---------------------------------+----------
    60-<70 |   872,830    874,536    285,655 | 2,033,021 
           |     42.93      43.02      14.05 |    100.00 
-----------+---------------------------------+----------
    70-<80 |   626,463    852,475    140,798 | 1,619,736 
           |     38.68      52.63       8.69 |    100.00 
-----------+---------------------------------+----------
       80+ |   362,017    437,987     34,427 |   834,431 
           |     43.38      52.49       4.13 |    100.00 
-----------+---------------------------------+----------
     Total | 6,793,007  4,831,984  2,622,947 |14,247,938 
           |     47.68      33.91      18.41 |    100.00 

. safetab agegroup ethnicity, row 
19

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |                       Ethnicity
       age |     White      Mixed  Asian or       Black      Other |     Total
-----------+-------------------------------------------------------+----------
    18-<30 | 1,478,214     45,149    172,864     63,022     77,602 | 1,836,851 
           |     80.48       2.46       9.41       3.43       4.22 |    100.00 
-----------+-------------------------------------------------------+----------
    30-<40 | 1,646,932     40,649    246,997     70,134     74,881 | 2,079,593 
           |     79.19       1.95      11.88       3.37       3.60 |    100.00 
-----------+-------------------------------------------------------+----------
    40-<50 | 1,569,115     30,041    192,350     72,670     56,493 | 1,920,669 
           |     81.70       1.56      10.01       3.78       2.94 |    100.00 
-----------+-------------------------------------------------------+----------
    50-<60 | 1,722,620     20,237    107,502     57,034     32,971 | 1,940,364 
           |     88.78       1.04       5.54       2.94       1.70 |    100.00 
-----------+-------------------------------------------------------+----------
    60-<70 | 1,434,460      8,872     76,119     22,438     18,567 | 1,560,456 
           |     91.93       0.57       4.88       1.44       1.19 |    100.00 
-----------+-------------------------------------------------------+----------
    70-<80 | 1,155,819      4,164     36,131     11,171      8,910 | 1,216,195 
           |     95.04       0.34       2.97       0.92       0.73 |    100.00 
-----------+-------------------------------------------------------+----------
       80+ |   537,123      1,917     18,172      7,204      3,670 |   568,086 
           |     94.55       0.34       3.20       1.27       0.65 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 9,544,283    151,029    850,135    303,673    273,094 |11,122,214 
           |     85.81       1.36       7.64       2.73       2.46 |    100.00 

. safetab agegroup imd,           row 
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |          Index of Multiple Deprivation (IMD)
       age | 1 least d          2          3          4  5 most de |     Total
-----------+-------------------------------------------------------+----------
    18-<30 |   433,087    475,189    544,920    609,387    608,036 | 2,670,619 
           |     16.22      17.79      20.40      22.82      22.77 |    100.00 
-----------+-------------------------------------------------------+----------
    30-<40 |   433,866    484,888    532,574    589,806    573,265 | 2,614,399 
           |     16.60      18.55      20.37      22.56      21.93 |    100.00 
-----------+-------------------------------------------------------+----------
    40-<50 |   502,049    487,391    486,189    490,134    453,413 | 2,419,176 
           |     20.75      20.15      20.10      20.26      18.74 |    100.00 
-----------+-------------------------------------------------------+----------
    50-<60 |   557,657    541,477    525,084    493,122    427,473 | 2,544,813 
           |     21.91      21.28      20.63      19.38      16.80 |    100.00 
-----------+-------------------------------------------------------+----------
    60-<70 |   477,551    457,846    436,692    380,026    301,084 | 2,053,199 
           |     23.26      22.30      21.27      18.51      14.66 |    100.00 
-----------+-------------------------------------------------------+----------
    70-<80 |   414,230    383,898    351,109    280,321    199,050 | 1,628,608 
           |     25.43      23.57      21.56      17.21      12.22 |    100.00 
-----------+-------------------------------------------------------+----------
       80+ |   215,285    196,286    180,924    144,046    102,600 |   839,141 
           |     25.66      23.39      21.56      17.17      12.23 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 3,033,725  3,026,975  3,057,492  2,986,842  2,664,921 |14,769,955 
           |     20.54      20.49      20.70      20.22      18.04 |    100.00 

. safetab agegroup shield,    row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |  Probable shielding
       age |         0          1 |     Total
-----------+----------------------+----------
    18-<30 | 2,105,997    564,622 | 2,670,619 
           |     78.86      21.14 |    100.00 
-----------+----------------------+----------
    30-<40 | 2,101,053    513,346 | 2,614,399 
           |     80.36      19.64 |    100.00 
-----------+----------------------+----------
    40-<50 | 1,950,349    468,827 | 2,419,176 
           |     80.62      19.38 |    100.00 
-----------+----------------------+----------
    50-<60 | 1,987,524    557,289 | 2,544,813 
           |     78.10      21.90 |    100.00 
-----------+----------------------+----------
    60-<70 | 1,485,915    567,284 | 2,053,199 
           |     72.37      27.63 |    100.00 
-----------+----------------------+----------
    70-<80 | 1,052,444    576,164 | 1,628,608 
           |     64.62      35.38 |    100.00 
-----------+----------------------+----------
       80+ |   516,283    322,858 |   839,141 
           |     61.53      38.47 |    100.00 
-----------+----------------------+----------
     Total |11,199,565  3,570,390 |14,769,955 
           |     75.83      24.17 |    100.00 

. 
. safetab bmicat smoke,            row   
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |          Smoking status
         Grouped BMI |     Never     Former    Current |     Total
---------------------+---------------------------------+----------
 Underweight (<18.5) |   122,572     56,381     75,287 |   254,240 
                     |     48.21      22.18      29.61 |    100.00 
---------------------+---------------------------------+----------
  Normal (18.5-24.9) | 2,035,251  1,270,280    810,465 | 4,115,996 
                     |     49.45      30.86      19.69 |    100.00 
---------------------+---------------------------------+----------
Overweight (25-29.9) | 1,849,796  1,579,668    647,690 | 4,077,154 
                     |     45.37      38.74      15.89 |    100.00 
---------------------+---------------------------------+----------
   Obese I (30-34.9) |   895,954    863,542    322,838 | 2,082,334 
                     |     43.03      41.47      15.50 |    100.00 
---------------------+---------------------------------+----------
  Obese II (35-39.9) |   347,835    335,173    127,259 |   810,267 
                     |     42.93      41.37      15.71 |    100.00 
---------------------+---------------------------------+----------
     Obese III (40+) |   177,784    167,450     65,043 |   410,277 
                     |     43.33      40.81      15.85 |    100.00 
---------------------+---------------------------------+----------
               Total | 5,429,192  4,272,494  2,048,582 |11,750,268 
                     |     46.20      36.36      17.43 |    100.00 

. safetab bmicat ethnicity,        row 
17

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |                       Ethnicity
         Grouped BMI |     White      Mixed  Asian or       Black      Other |     Total
---------------------+-------------------------------------------------------+----------
 Underweight (<18.5) |   164,030      3,456     21,864      4,433      9,967 |   203,750 
                     |     80.51       1.70      10.73       2.18       4.89 |    100.00 
---------------------+-------------------------------------------------------+----------
  Normal (18.5-24.9) | 2,896,447     48,694    268,710     73,979    105,130 | 3,392,960 
                     |     85.37       1.44       7.92       2.18       3.10 |    100.00 
---------------------+-------------------------------------------------------+----------
Overweight (25-29.9) | 2,863,676     39,411    262,874     89,425     64,457 | 3,319,843 
                     |     86.26       1.19       7.92       2.69       1.94 |    100.00 
---------------------+-------------------------------------------------------+----------
   Obese I (30-34.9) | 1,457,026     19,250    109,071     50,873     24,617 | 1,660,837 
                     |     87.73       1.16       6.57       3.06       1.48 |    100.00 
---------------------+-------------------------------------------------------+----------
  Obese II (35-39.9) |   568,749      7,331     33,221     19,970      7,582 |   636,853 
                     |     89.31       1.15       5.22       3.14       1.19 |    100.00 
---------------------+-------------------------------------------------------+----------
     Obese III (40+) |   289,458      3,871     12,914      9,586      3,197 |   319,026 
                     |     90.73       1.21       4.05       3.00       1.00 |    100.00 
---------------------+-------------------------------------------------------+----------
               Total | 8,239,386    122,013    708,654    248,266    214,950 | 9,533,269 
                     |     86.43       1.28       7.43       2.60       2.25 |    100.00 

. safetab bmicat imd,              row 
11

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |          Index of Multiple Deprivation (IMD)
         Grouped BMI | 1 least d          2          3          4  5 most de |     Total
---------------------+-------------------------------------------------------+----------
 Underweight (<18.5) |    45,419     48,436     53,220     56,375     56,897 |   260,347 
                     |     17.45      18.60      20.44      21.65      21.85 |    100.00 
---------------------+-------------------------------------------------------+----------
  Normal (18.5-24.9) |   932,651    893,003    866,553    802,850    659,678 | 4,154,735 
                     |     22.45      21.49      20.86      19.32      15.88 |    100.00 
---------------------+-------------------------------------------------------+----------
Overweight (25-29.9) |   894,070    869,462    854,725    805,175    675,965 | 4,099,397 
                     |     21.81      21.21      20.85      19.64      16.49 |    100.00 
---------------------+-------------------------------------------------------+----------
   Obese I (30-34.9) |   392,669    413,668    433,409    442,048    411,020 | 2,092,814 
                     |     18.76      19.77      20.71      21.12      19.64 |    100.00 
---------------------+-------------------------------------------------------+----------
  Obese II (35-39.9) |   131,342    149,127    165,763    182,061    186,441 |   814,734 
                     |     16.12      18.30      20.35      22.35      22.88 |    100.00 
---------------------+-------------------------------------------------------+----------
     Obese III (40+) |    56,753     69,195     81,876     96,948    108,048 |   412,820 
                     |     13.75      16.76      19.83      23.48      26.17 |    100.00 
---------------------+-------------------------------------------------------+----------
               Total | 2,452,904  2,442,891  2,455,546  2,385,457  2,098,049 |11,834,847 
                     |     20.73      20.64      20.75      20.16      17.73 |    100.00 

. safetab bmicat hypertension, row 
20

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |       Diagnosed
                     |     hypertension
         Grouped BMI |         0          1 |     Total
---------------------+----------------------+----------
 Underweight (<18.5) |   226,882     33,465 |   260,347 
                     |     87.15      12.85 |    100.00 
---------------------+----------------------+----------
  Normal (18.5-24.9) | 3,493,803    660,932 | 4,154,735 
                     |     84.09      15.91 |    100.00 
---------------------+----------------------+----------
Overweight (25-29.9) | 2,991,276  1,108,121 | 4,099,397 
                     |     72.97      27.03 |    100.00 
---------------------+----------------------+----------
   Obese I (30-34.9) | 1,355,406    737,408 | 2,092,814 
                     |     64.76      35.24 |    100.00 
---------------------+----------------------+----------
  Obese II (35-39.9) |   498,964    315,770 |   814,734 
                     |     61.24      38.76 |    100.00 
---------------------+----------------------+----------
     Obese III (40+) |   247,690    165,130 |   412,820 
                     |     60.00      40.00 |    100.00 
---------------------+----------------------+----------
               Total | 8,814,021  3,020,826 |11,834,847 
                     |     74.48      25.52 |    100.00 

. safetab bmicat shield,    row 
14

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |  Probable shielding
         Grouped BMI |         0          1 |     Total
---------------------+----------------------+----------
 Underweight (<18.5) |   188,538     71,809 |   260,347 
                     |     72.42      27.58 |    100.00 
---------------------+----------------------+----------
  Normal (18.5-24.9) | 3,154,671  1,000,064 | 4,154,735 
                     |     75.93      24.07 |    100.00 
---------------------+----------------------+----------
Overweight (25-29.9) | 3,038,528  1,060,869 | 4,099,397 
                     |     74.12      25.88 |    100.00 
---------------------+----------------------+----------
   Obese I (30-34.9) | 1,500,277    592,537 | 2,092,814 
                     |     71.69      28.31 |    100.00 
---------------------+----------------------+----------
  Obese II (35-39.9) |   561,823    252,911 |   814,734 
                     |     68.96      31.04 |    100.00 
---------------------+----------------------+----------
     Obese III (40+) |   273,211    139,609 |   412,820 
                     |     66.18      33.82 |    100.00 
---------------------+----------------------+----------
               Total | 8,717,048  3,117,799 |11,834,847 
                     |     73.66      26.34 |    100.00 

. 
.                             
. safetab smoke ethnicity,        row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |                       Ethnicity
      status |     White      Mixed  Asian or       Black      Other |     Total
-------------+-------------------------------------------------------+----------
       Never | 4,111,275     79,150    596,653    197,058    162,488 | 5,146,624 
             |     79.88       1.54      11.59       3.83       3.16 |    100.00 
-------------+-------------------------------------------------------+----------
      Former | 3,482,106     35,209    131,442     55,989     50,478 | 3,755,224 
             |     92.73       0.94       3.50       1.49       1.34 |    100.00 
-------------+-------------------------------------------------------+----------
     Current | 1,787,064     31,167     96,110     40,534     46,682 | 2,001,557 
             |     89.28       1.56       4.80       2.03       2.33 |    100.00 
-------------+-------------------------------------------------------+----------
       Total | 9,380,445    145,526    824,205    293,581    259,648 |10,903,405 
             |     86.03       1.33       7.56       2.69       2.38 |    100.00 

. safetab smoke imd,                      row 
10

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |          Index of Multiple Deprivation (IMD)
      status | 1 least d          2          3          4  5 most de |     Total
-------------+-------------------------------------------------------+----------
       Never | 1,579,872  1,474,386  1,410,043  1,300,967  1,027,739 | 6,793,007 
             |     23.26      21.70      20.76      19.15      15.13 |    100.00 
-------------+-------------------------------------------------------+----------
      Former | 1,060,684  1,052,555  1,033,951    930,374    754,420 | 4,831,984 
             |     21.95      21.78      21.40      19.25      15.61 |    100.00 
-------------+-------------------------------------------------------+----------
     Current |   305,305    403,657    507,817    641,297    764,871 | 2,622,947 
             |     11.64      15.39      19.36      24.45      29.16 |    100.00 
-------------+-------------------------------------------------------+----------
       Total | 2,945,861  2,930,598  2,951,811  2,872,638  2,547,030 |14,247,938 
             |     20.68      20.57      20.72      20.16      17.88 |    100.00 

. safetab smoke hypertension, row 
19

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

             |       Diagnosed
     Smoking |     hypertension
      status |         0          1 |     Total
-------------+----------------------+----------
       Never | 5,471,765  1,321,242 | 6,793,007 
             |     80.55      19.45 |    100.00 
-------------+----------------------+----------
      Former | 3,298,903  1,533,081 | 4,831,984 
             |     68.27      31.73 |    100.00 
-------------+----------------------+----------
     Current | 2,246,628    376,319 | 2,622,947 
             |     85.65      14.35 |    100.00 
-------------+----------------------+----------
       Total |11,017,296  3,230,642 |14,247,938 
             |     77.33      22.67 |    100.00 

. safetab smoke shield,    row 
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |  Probable shielding
      status |         0          1 |     Total
-------------+----------------------+----------
       Never | 5,341,426  1,451,581 | 6,793,007 
             |     78.63      21.37 |    100.00 
-------------+----------------------+----------
      Former | 3,403,628  1,428,356 | 4,831,984 
             |     70.44      29.56 |    100.00 
-------------+----------------------+----------
     Current | 1,967,204    655,743 | 2,622,947 
             |     75.00      25.00 |    100.00 
-------------+----------------------+----------
       Total |10,712,258  3,535,680 |14,247,938 
             |     75.18      24.82 |    100.00 

.                       
. safetab ethnicity imd,          row 
14

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                      |          Index of Multiple Deprivation (IMD)
            Ethnicity | 1 least d          2          3          4  5 most de |     Total
----------------------+-------------------------------------------------------+----------
                White | 2,046,209  2,038,744  1,986,500  1,861,750  1,611,080 | 9,544,283 
                      |     21.44      21.36      20.81      19.51      16.88 |    100.00 
----------------------+-------------------------------------------------------+----------
                Mixed |    19,701     24,364     29,894     36,465     40,605 |   151,029 
                      |     13.04      16.13      19.79      24.14      26.89 |    100.00 
----------------------+-------------------------------------------------------+----------
Asian or Asian Britis |    76,683    103,691    166,191    245,562    258,008 |   850,135 
                      |      9.02      12.20      19.55      28.89      30.35 |    100.00 
----------------------+-------------------------------------------------------+----------
                Black |    20,456     31,719     52,155     82,766    116,577 |   303,673 
                      |      6.74      10.45      17.17      27.25      38.39 |    100.00 
----------------------+-------------------------------------------------------+----------
                Other |    36,227     46,202     55,137     68,962     66,566 |   273,094 
                      |     13.27      16.92      20.19      25.25      24.37 |    100.00 
----------------------+-------------------------------------------------------+----------
                Total | 2,199,276  2,244,720  2,289,877  2,295,505  2,092,836 |11,122,214 
                      |     19.77      20.18      20.59      20.64      18.82 |    100.00 

. safetab shield imd,             row 
11

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

  Probable |          Index of Multiple Deprivation (IMD)
 shielding | 1 least d          2          3          4  5 most de |     Total
-----------+-------------------------------------------------------+----------
         0 | 2,293,692  2,293,316  2,322,350  2,278,575  2,011,632 |11,199,565 
           |     20.48      20.48      20.74      20.35      17.96 |    100.00 
-----------+-------------------------------------------------------+----------
         1 |   740,033    733,659    735,142    708,267    653,289 | 3,570,390 
           |     20.73      20.55      20.59      19.84      18.30 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 3,033,725  3,026,975  3,057,492  2,986,842  2,664,921 |14,769,955 
           |     20.54      20.49      20.70      20.22      18.04 |    100.00 

. 
. safetab shield ethnicity,               row 
17

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

  Probable |                       Ethnicity
 shielding |     White      Mixed  Asian or       Black      Other |     Total
-----------+-------------------------------------------------------+----------
         0 | 7,063,805    120,948    716,513    250,562    243,792 | 8,395,620 
           |     84.14       1.44       8.53       2.98       2.90 |    100.00 
-----------+-------------------------------------------------------+----------
         1 | 2,480,478     30,081    133,622     53,111     29,302 | 2,726,594 
           |     90.97       1.10       4.90       1.95       1.07 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 9,544,283    151,029    850,135    303,673    273,094 |11,122,214 
           |     85.81       1.36       7.64       2.73       2.46 |    100.00 

. 
. /* SENSE CHECK OUTCOMES=======================================================*/
. 
. safetab worms
0

Failure/cen |
     soring |
  indicator |
        for |
   outcome: |
      worms |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 14,560,536       98.58       98.58
          1 |    209,419        1.42      100.00
------------+-----------------------------------
      Total | 14,769,955      100.00

. 
. 
. * Close log file 
. log close
      name:  <unnamed>
       log:  E:\will\school-age-children-and-covid\analysis\log\WORMS_02_an_data_checks.log
  log type:  text
 closed on:  26 Aug 2020, 20:03:00
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
