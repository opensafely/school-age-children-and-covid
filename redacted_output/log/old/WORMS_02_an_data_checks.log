----------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  e:\analyses\school-age-children-and-covid\analysis\log\WORMS_02_an_data_checks.log
  log type:  text
 opened on:   7 Aug 2020, 02:02:57

. 
. * Open Stata dataset
. use $tempdir\analysis_dataset_worms, clear

. 
. *run ssc install if not on local machine - server needs datacheck.ado file
. *ssc install datacheck 
. 
. *Duplicate patient check
. datacheck _n==1, by(patient_id) nol

. 
. 
. /* CHECK INCLUSION AND EXCLUSION CRITERIA=====================================*/ 
. 
. * DATA STRUCTURE: Confirm one row per patient 
. duplicates tag patient_id, generate(dup_check)

Duplicates in terms of patient_id

. assert dup_check == 0 

. drop dup_check

. 
. * INCLUSION 1: >=18 and <=110 at 1 March 2020 
. assert age < .

. assert age >= 18 

. assert age <= 110

.  
. * INCLUSION 2: M or F gender at 1 March 2020 
. assert inlist(sex, "M", "F")

. 
. * EXCLUDE 1:  MISSING IMD
. assert inlist(imd, 1, 2, 3, 4, 5)

. 
. * EXCLUDE 2:  HH with more than 10 people
. datacheck inlist(household_size, 1, 2, 3, 4, 5,6, 7, 8, 9, 10), nol

. 
. /* EXPECTED VALUES============================================================*/ 
. 
. *HH
. datacheck kids_cat3<., nol

. datacheck inlist(kids_cat3, 0,1, 2), nol

. 
. datacheck number_kids<., nol

. datacheck inlist(number_kids, 0,1,2,3,4,5,6,7,8,9), nol

. 
. * Age
. datacheck age<., nol

. datacheck inlist(agegroup, 1, 2, 3, 4, 5, 6,7), nol

. datacheck inlist(age66, 0, 1), nol

. 
. * Sex
. datacheck inlist(male, 0, 1), nol

. 
. * BMI 
. datacheck inlist(obese4cat, 1, 2, 3, 4), nol

. datacheck inlist(bmicat, 1, 2, 3, 4, 5, 6, .u), nol

. 
. * IMD
. datacheck inlist(imd, 1, 2, 3, 4, 5), nol

. 
. * Ethnicity
. datacheck inlist(ethnicity, 1, 2, 3, 4, 5, .u), nol

. 
. * Smoking
. datacheck inlist(smoke, 1, 2, 3, .u), nol

. datacheck inlist(smoke_nomiss, 1, 2, 3), nol 

. 
. 
. * Check date ranges for all comorbidities 
. 
. foreach var of varlist  chronic_respiratory_disease     ///
>                                         chronic_cardiac_disease         ///
>                                         chronic_liver_disease           ///
>                                         other_neuro                     ///
>                                         stroke_dementia ///
>                                         ra_sle_psoriasis                                ///
>                                         perm_immunodef  ///
>                                         temp_immunodef  ///
>                                         other_transplant                        /// 
>                                         asplenia                        /// 
>                                         hypertension                            ///
>                                         {
  2.                                                 
.         summ `var'_date, format
  3. 
. }

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_r~te |    630,468   19apr2009    6325.525  15dec1899  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_c~te |  1,039,807   11jan2007    6516.648  15jan1840  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
chronic_l~te |     92,434   26sep2009    6275.452  15dec1840  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
other_neur~e |    146,604   14feb2002    7979.639  15dec1899  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
stroke_dem~e |    338,648   11aug2010    5325.247  15dec1899  15jul2096

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
ra_sle_pso~e |    774,390   19apr2002    7332.963  15jan1840  15mar3000

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
perm_immun~e |     38,199   25mar2008    6148.376  15jan1900  15jan2019

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
temp_immun~e |      3,945   06sep2018    100.5803  15feb2018  15jan2019

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
other_tran~e |      3,878   14jan2008    4727.014  15jan1900  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
asplenia_d~e |     21,965   23oct1992    9033.327  15dec1899  15jul2020

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hypertensi~e |  3,222,679   27sep2004    7167.267  15jan1800  15feb2058

. 
. foreach comorb in $varlist { 
  2. 
.         local comorb: subinstr local comorb "i." ""
  3.         safetab `comorb', m
  4.         
. }

. 
. * Outcome dates
. summ  worms, format

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
       worms | 14,794,410    .0142369    .1184662          0          1

. 
. 
. /* LOGICAL RELATIONSHIPS======================================================*/ 
. 
. *HH variables
. safetab kids_cat3 tot_adults_hh
0

  Presence of |
  children or |
 young people |
       in the |    Total number adults in hh
    household |         1          2          3 |     Total
--------------+---------------------------------+----------
      No kids | 3,403,877  4,311,074  2,877,035 |10,591,986 
Kids under 12 |   476,833  1,728,398    877,220 | 3,082,451 
Kids under 18 |   134,777    460,728    524,468 | 1,119,973 
--------------+---------------------------------+----------
        Total | 4,015,487  6,500,200  4,278,723 |14,794,410 

. safetab number_kids tot_adults_hh
0

**TABLE OF number_kids tot_adults_hh REDACTED DUE TO SMALL N**


. safetab household_size tot_adults_hh
0

    Number |
 people in |    Total number adults in hh
 household |         1          2          3 |     Total
-----------+---------------------------------+----------
         1 | 3,194,587          0          0 | 3,194,587 
         2 |   427,256  4,051,104          0 | 4,478,360 
         3 |   260,351    963,958  1,587,354 | 2,811,663 
         4 |    90,710  1,029,984  1,199,320 | 2,320,014 
         5 |    28,867    321,414    688,351 | 1,038,632 
         6 |     8,983     92,856    385,879 |   487,718 
         7 |     3,063     27,822    216,783 |   247,668 
         8 |     1,165      9,424    125,408 |   135,997 
         9 |       505      3,638     75,628 |    79,771 
-----------+---------------------------------+----------
     Total | 4,015,487  6,500,200  4,278,723 |14,794,410 

. 
. * BMI
. bysort bmicat: summ bmi

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Underweight (<18.5)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    259,313    17.43318    .8252263         15       18.4

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Normal (18.5-24.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  4,160,826     22.3816    1.707351       18.5       24.9

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Overweight (25-29.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  4,104,188    27.27551    1.413549         25       29.9

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese I (30-34.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |  2,094,123    32.08551    1.417116         30       34.9

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese II (35-39.9)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    815,021    37.05249    1.407326         35       39.9

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Obese III (40+)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |    412,387     43.3939    2.639145         40         50

----------------------------------------------------------------------------------------------------------------------------------
-> bmicat = Unknown (.u)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         bmi |          0


. safetab bmicat obese4cat, m
17

                     |     Evidence of obesity (4 categories)
         Grouped BMI | No record  Obese I (  Obese II   Obese III |     Total
---------------------+--------------------------------------------+----------
 Underweight (<18.5) |   259,313          0          0          0 |   259,313 
  Normal (18.5-24.9) | 4,160,826          0          0          0 | 4,160,826 
Overweight (25-29.9) | 4,104,188          0          0          0 | 4,104,188 
   Obese I (30-34.9) |         0  2,094,123          0          0 | 2,094,123 
  Obese II (35-39.9) |         0          0    815,021          0 |   815,021 
     Obese III (40+) |         0          0          0    412,387 |   412,387 
        Unknown (.u) | 2,948,552          0          0          0 | 2,948,552 
---------------------+--------------------------------------------+----------
               Total |11,472,879  2,094,123    815,021    412,387 |14,794,410 

. 
. * Age
. bysort agegroup: summ age

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 18-<30

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,690,079    23.88164     3.42987         18         29

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 30-<40

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,626,088    34.47031    2.873078         30         39

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 40-<50

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,426,420    44.62265     2.89115         40         49

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 50-<60

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,549,194    54.39828    2.841443         50         59

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 60-<70

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  2,052,719     64.3577    2.897754         60         69

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 70-<80

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |  1,623,159    73.85656    2.800049         70         79

----------------------------------------------------------------------------------------------------------------------------------
-> agegroup = 80+

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |    826,751    84.74326     4.05163         80        110


. safetab agegroup age66, m
15

   Grouped |  66 years and older
       age |         0          1 |     Total
-----------+----------------------+----------
    18-<30 | 2,690,079          0 | 2,690,079 
    30-<40 | 2,626,088          0 | 2,626,088 
    40-<50 | 2,426,420          0 | 2,426,420 
    50-<60 | 2,549,194          0 | 2,549,194 
    60-<70 | 1,466,783    585,936 | 2,052,719 
    70-<80 |         0  1,623,159 | 1,623,159 
       80+ |         0    826,751 |   826,751 
-----------+----------------------+----------
     Total |11,758,564  3,035,846 |14,794,410 

. 
. * Smoking
. safetab smoke smoke_nomiss, m
19

             |  Smoking status (missing set to
     Smoking |               non)
      status |     Never     Former    Current |     Total
-------------+---------------------------------+----------
       Never | 6,806,070          0          0 | 6,806,070 
      Former |         0  4,834,035          0 | 4,834,035 
     Current |         0          0  2,630,176 | 2,630,176 
Unknown (.u) |   524,129          0          0 |   524,129 
-------------+---------------------------------+----------
       Total | 7,330,199  4,834,035  2,630,176 |14,794,410 

. 
. * Diabetes
. *safetab diabcat diabetes, m
. 
. * CKD
. safetab reduced egfr_cat, m
17

       Reduced kidney |                          Calculated eGFR
             function |         0         15         30         45         60          . |     Total
----------------------+------------------------------------------------------------------+----------
                 None |         0          0          0          0 10,014,158  3,922,229 |13,936,387 
Stage 3a/3b egfr 30-6 |         0          0    192,441    611,564          0          0 |   804,005 
    Stage 4/5 egfr<30 |    10,375     43,643          0          0          0          0 |    54,018 
----------------------+------------------------------------------------------------------+----------
                Total |    10,375     43,643    192,441    611,564 10,014,158  3,922,229 |14,794,410 

. 
. 
. /* EXPECTED RELATIONSHIPS=====================================================*/ 
. 
. /*  Relationships between demographic/lifestyle variables  */
. safetab agegroup bmicat,        row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |                            Grouped BMI
       age | Underweig  Normal (1  Overweigh  Obese I (  Obese II   Obese III |     Total
-----------+------------------------------------------------------------------+----------
    18-<30 |    97,542    869,539    419,735    192,859     88,935     53,121 | 1,721,731 
           |      5.67      50.50      24.38      11.20       5.17       3.09 |    100.00 
-----------+------------------------------------------------------------------+----------
    30-<40 |    47,125    827,484    614,972    285,026    120,845     70,595 | 1,966,047 
           |      2.40      42.09      31.28      14.50       6.15       3.59 |    100.00 
-----------+------------------------------------------------------------------+----------
    40-<50 |    24,937    642,807    693,814    356,841    144,591     79,347 | 1,942,337 
           |      1.28      33.09      35.72      18.37       7.44       4.09 |    100.00 
-----------+------------------------------------------------------------------+----------
    50-<60 |    21,855    595,571    798,832    455,836    184,249     94,986 | 2,151,329 
           |      1.02      27.68      37.13      21.19       8.56       4.42 |    100.00 
-----------+------------------------------------------------------------------+----------
    60-<70 |    22,176    501,967    697,132    389,042    147,541     68,214 | 1,826,072 
           |      1.21      27.49      38.18      21.30       8.08       3.74 |    100.00 
-----------+------------------------------------------------------------------+----------
    70-<80 |    22,818    440,566    595,239    299,153     98,476     37,670 | 1,493,922 
           |      1.53      29.49      39.84      20.02       6.59       2.52 |    100.00 
-----------+------------------------------------------------------------------+----------
       80+ |    22,860    282,892    284,464    115,366     30,384      8,454 |   744,420 
           |      3.07      38.00      38.21      15.50       4.08       1.14 |    100.00 
-----------+------------------------------------------------------------------+----------
     Total |   259,313  4,160,826  4,104,188  2,094,123    815,021    412,387 |11,845,858 
           |      2.19      35.12      34.65      17.68       6.88       3.48 |    100.00 

. safetab agegroup smoke,         row  
15

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |          Smoking status
       age |     Never     Former    Current |     Total
-----------+---------------------------------+----------
    18-<30 | 1,478,545    351,827    542,750 | 2,373,122 
           |     62.30      14.83      22.87 |    100.00 
-----------+---------------------------------+----------
    30-<40 | 1,233,547    686,873    619,816 | 2,540,236 
           |     48.56      27.04      24.40 |    100.00 
-----------+---------------------------------+----------
    40-<50 | 1,078,831    775,340    521,503 | 2,375,674 
           |     45.41      32.64      21.95 |    100.00 
-----------+---------------------------------+----------
    50-<60 | 1,161,536    864,129    486,641 | 2,512,306 
           |     46.23      34.40      19.37 |    100.00 
-----------+---------------------------------+----------
    60-<70 |   872,605    874,479    285,470 | 2,032,554 
           |     42.93      43.02      14.04 |    100.00 
-----------+---------------------------------+----------
    70-<80 |   624,447    849,740    140,109 | 1,614,296 
           |     38.68      52.64       8.68 |    100.00 
-----------+---------------------------------+----------
       80+ |   356,559    431,647     33,887 |   822,093 
           |     43.37      52.51       4.12 |    100.00 
-----------+---------------------------------+----------
     Total | 6,806,070  4,834,035  2,630,176 |14,270,281 
           |     47.69      33.87      18.43 |    100.00 

. safetab agegroup ethnicity, row 
19

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |                       Ethnicity
       age |     White      Mixed  Asian or       Black      Other |     Total
-----------+-------------------------------------------------------+----------
    18-<30 | 1,491,245     45,438    173,698     63,255     77,828 | 1,851,464 
           |     80.54       2.45       9.38       3.42       4.20 |    100.00 
-----------+-------------------------------------------------------+----------
    30-<40 | 1,655,678     40,831    247,423     70,350     75,077 | 2,089,359 
           |     79.24       1.95      11.84       3.37       3.59 |    100.00 
-----------+-------------------------------------------------------+----------
    40-<50 | 1,574,606     30,107    192,767     72,808     56,652 | 1,926,940 
           |     81.72       1.56      10.00       3.78       2.94 |    100.00 
-----------+-------------------------------------------------------+----------
    50-<60 | 1,726,239     20,290    107,630     57,019     33,030 | 1,944,208 
           |     88.79       1.04       5.54       2.93       1.70 |    100.00 
-----------+-------------------------------------------------------+----------
    60-<70 | 1,434,374      8,855     76,182     22,444     18,593 | 1,560,448 
           |     91.92       0.57       4.88       1.44       1.19 |    100.00 
-----------+-------------------------------------------------------+----------
    70-<80 | 1,152,006      4,140     36,113     11,145      8,899 | 1,212,303 
           |     95.03       0.34       2.98       0.92       0.73 |    100.00 
-----------+-------------------------------------------------------+----------
       80+ |   528,222      1,901     18,160      7,150      3,630 |   559,063 
           |     94.48       0.34       3.25       1.28       0.65 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 9,562,370    151,562    851,973    304,171    273,709 |11,143,785 
           |     85.81       1.36       7.65       2.73       2.46 |    100.00 

. safetab agegroup imd,           row 
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |          Index of Multiple Deprivation (IMD)
       age | 1 least d          2          3          4  5 most de |     Total
-----------+-------------------------------------------------------+----------
    18-<30 |   437,685    479,119    548,867    613,020    611,388 | 2,690,079 
           |     16.27      17.81      20.40      22.79      22.73 |    100.00 
-----------+-------------------------------------------------------+----------
    30-<40 |   436,773    487,045    534,671    592,126    575,473 | 2,626,088 
           |     16.63      18.55      20.36      22.55      21.91 |    100.00 
-----------+-------------------------------------------------------+----------
    40-<50 |   504,111    488,689    487,547    491,243    454,830 | 2,426,420 
           |     20.78      20.14      20.09      20.25      18.74 |    100.00 
-----------+-------------------------------------------------------+----------
    50-<60 |   559,531    542,375    525,927    493,480    427,881 | 2,549,194 
           |     21.95      21.28      20.63      19.36      16.78 |    100.00 
-----------+-------------------------------------------------------+----------
    60-<70 |   478,042    457,800    436,605    379,466    300,806 | 2,052,719 
           |     23.29      22.30      21.27      18.49      14.65 |    100.00 
-----------+-------------------------------------------------------+----------
    70-<80 |   413,340    382,607    350,140    278,956    198,116 | 1,623,159 
           |     25.47      23.57      21.57      17.19      12.21 |    100.00 
-----------+-------------------------------------------------------+----------
       80+ |   212,594    193,413    178,138    141,671    100,935 |   826,751 
           |     25.71      23.39      21.55      17.14      12.21 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 3,042,076  3,031,048  3,061,895  2,989,962  2,669,429 |14,794,410 
           |     20.56      20.49      20.70      20.21      18.04 |    100.00 

. safetab agegroup shield,    row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

   Grouped |  Probable shielding
       age |         0          1 |     Total
-----------+----------------------+----------
    18-<30 | 2,120,970    569,109 | 2,690,079 
           |     78.84      21.16 |    100.00 
-----------+----------------------+----------
    30-<40 | 2,110,359    515,729 | 2,626,088 
           |     80.36      19.64 |    100.00 
-----------+----------------------+----------
    40-<50 | 1,956,540    469,880 | 2,426,420 
           |     80.63      19.37 |    100.00 
-----------+----------------------+----------
    50-<60 | 1,991,899    557,295 | 2,549,194 
           |     78.14      21.86 |    100.00 
-----------+----------------------+----------
    60-<70 | 1,486,928    565,791 | 2,052,719 
           |     72.44      27.56 |    100.00 
-----------+----------------------+----------
    70-<80 | 1,050,606    572,553 | 1,623,159 
           |     64.73      35.27 |    100.00 
-----------+----------------------+----------
       80+ |   509,847    316,904 |   826,751 
           |     61.67      38.33 |    100.00 
-----------+----------------------+----------
     Total |11,227,149  3,567,261 |14,794,410 
           |     75.89      24.11 |    100.00 

. 
. safetab bmicat smoke,            row   
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |          Smoking status
         Grouped BMI |     Never     Former    Current |     Total
---------------------+---------------------------------+----------
 Underweight (<18.5) |   122,314     55,621     75,209 |   253,144 
                     |     48.32      21.97      29.71 |    100.00 
---------------------+---------------------------------+----------
  Normal (18.5-24.9) | 2,039,307  1,269,343    812,997 | 4,121,647 
                     |     49.48      30.80      19.73 |    100.00 
---------------------+---------------------------------+----------
Overweight (25-29.9) | 1,852,053  1,580,596    649,226 | 4,081,875 
                     |     45.37      38.72      15.91 |    100.00 
---------------------+---------------------------------+----------
   Obese I (30-34.9) |   896,399    863,867    323,351 | 2,083,617 
                     |     43.02      41.46      15.52 |    100.00 
---------------------+---------------------------------+----------
  Obese II (35-39.9) |   348,000    335,232    127,329 |   810,561 
                     |     42.93      41.36      15.71 |    100.00 
---------------------+---------------------------------+----------
     Obese III (40+) |   177,528    167,319     64,996 |   409,843 
                     |     43.32      40.83      15.86 |    100.00 
---------------------+---------------------------------+----------
               Total | 5,435,601  4,271,978  2,053,108 |11,760,687 
                     |     46.22      36.32      17.46 |    100.00 

. safetab bmicat ethnicity,        row 
17

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |                       Ethnicity
         Grouped BMI |     White      Mixed  Asian or       Black      Other |     Total
---------------------+-------------------------------------------------------+----------
 Underweight (<18.5) |   163,309      3,465     21,899      4,443      9,976 |   203,092 
                     |     80.41       1.71      10.78       2.19       4.91 |    100.00 
---------------------+-------------------------------------------------------+----------
  Normal (18.5-24.9) | 2,901,905     48,934    269,452     74,106    105,378 | 3,399,775 
                     |     85.36       1.44       7.93       2.18       3.10 |    100.00 
---------------------+-------------------------------------------------------+----------
Overweight (25-29.9) | 2,868,310     39,513    263,363     89,587     64,689 | 3,325,462 
                     |     86.25       1.19       7.92       2.69       1.95 |    100.00 
---------------------+-------------------------------------------------------+----------
   Obese I (30-34.9) | 1,458,741     19,263    109,178     50,887     24,632 | 1,662,701 
                     |     87.73       1.16       6.57       3.06       1.48 |    100.00 
---------------------+-------------------------------------------------------+----------
  Obese II (35-39.9) |   569,173      7,365     33,303     19,991      7,592 |   637,424 
                     |     89.29       1.16       5.22       3.14       1.19 |    100.00 
---------------------+-------------------------------------------------------+----------
     Obese III (40+) |   289,299      3,868     12,918      9,547      3,183 |   318,815 
                     |     90.74       1.21       4.05       2.99       1.00 |    100.00 
---------------------+-------------------------------------------------------+----------
               Total | 8,250,737    122,408    710,113    248,561    215,450 | 9,547,269 
                     |     86.42       1.28       7.44       2.60       2.26 |    100.00 

. safetab bmicat imd,              row 
11

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |          Index of Multiple Deprivation (IMD)
         Grouped BMI | 1 least d          2          3          4  5 most de |     Total
---------------------+-------------------------------------------------------+----------
 Underweight (<18.5) |    45,249     48,238     52,952     56,123     56,751 |   259,313 
                     |     17.45      18.60      20.42      21.64      21.89 |    100.00 
---------------------+-------------------------------------------------------+----------
  Normal (18.5-24.9) |   934,638    893,760    867,620    803,573    661,235 | 4,160,826 
                     |     22.46      21.48      20.85      19.31      15.89 |    100.00 
---------------------+-------------------------------------------------------+----------
Overweight (25-29.9) |   896,058    869,983    855,588    805,686    676,873 | 4,104,188 
                     |     21.83      21.20      20.85      19.63      16.49 |    100.00 
---------------------+-------------------------------------------------------+----------
   Obese I (30-34.9) |   393,498    413,876    433,428    442,165    411,156 | 2,094,123 
                     |     18.79      19.76      20.70      21.11      19.63 |    100.00 
---------------------+-------------------------------------------------------+----------
  Obese II (35-39.9) |   131,457    149,157    165,953    182,004    186,450 |   815,021 
                     |     16.13      18.30      20.36      22.33      22.88 |    100.00 
---------------------+-------------------------------------------------------+----------
     Obese III (40+) |    56,755     69,128     81,794     96,799    107,911 |   412,387 
                     |     13.76      16.76      19.83      23.47      26.17 |    100.00 
---------------------+-------------------------------------------------------+----------
               Total | 2,457,655  2,444,142  2,457,335  2,386,350  2,100,376 |11,845,858 
                     |     20.75      20.63      20.74      20.15      17.73 |    100.00 

. safetab bmicat hypertension, row 
20

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |       Diagnosed
                     |     hypertension
         Grouped BMI |         0          1 |     Total
---------------------+----------------------+----------
 Underweight (<18.5) |   227,181     32,132 |   259,313 
                     |     87.61      12.39 |    100.00 
---------------------+----------------------+----------
  Normal (18.5-24.9) | 3,506,889    653,937 | 4,160,826 
                     |     84.28      15.72 |    100.00 
---------------------+----------------------+----------
Overweight (25-29.9) | 3,000,066  1,104,122 | 4,104,188 
                     |     73.10      26.90 |    100.00 
---------------------+----------------------+----------
   Obese I (30-34.9) | 1,358,608    735,515 | 2,094,123 
                     |     64.88      35.12 |    100.00 
---------------------+----------------------+----------
  Obese II (35-39.9) |   499,856    315,165 |   815,021 
                     |     61.33      38.67 |    100.00 
---------------------+----------------------+----------
     Obese III (40+) |   247,866    164,521 |   412,387 
                     |     60.11      39.89 |    100.00 
---------------------+----------------------+----------
               Total | 8,840,466  3,005,392 |11,845,858 
                     |     74.63      25.37 |    100.00 

. safetab bmicat shield,    row 
14

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                     |  Probable shielding
         Grouped BMI |         0          1 |     Total
---------------------+----------------------+----------
 Underweight (<18.5) |   188,391     70,922 |   259,313 
                     |     72.65      27.35 |    100.00 
---------------------+----------------------+----------
  Normal (18.5-24.9) | 3,162,246    998,580 | 4,160,826 
                     |     76.00      24.00 |    100.00 
---------------------+----------------------+----------
Overweight (25-29.9) | 3,044,317  1,059,871 | 4,104,188 
                     |     74.18      25.82 |    100.00 
---------------------+----------------------+----------
   Obese I (30-34.9) | 1,502,363    591,760 | 2,094,123 
                     |     71.74      28.26 |    100.00 
---------------------+----------------------+----------
  Obese II (35-39.9) |   562,457    252,564 |   815,021 
                     |     69.01      30.99 |    100.00 
---------------------+----------------------+----------
     Obese III (40+) |   273,059    139,328 |   412,387 
                     |     66.21      33.79 |    100.00 
---------------------+----------------------+----------
               Total | 8,732,833  3,113,025 |11,845,858 
                     |     73.72      26.28 |    100.00 

. 
.                             
. safetab smoke ethnicity,        row 
16

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |                       Ethnicity
      status |     White      Mixed  Asian or       Black      Other |     Total
-------------+-------------------------------------------------------+----------
       Never | 4,120,033     79,379    597,878    197,383    162,883 | 5,157,556 
             |     79.88       1.54      11.59       3.83       3.16 |    100.00 
-------------+-------------------------------------------------------+----------
      Former | 3,484,435     35,320    131,728     56,059     50,594 | 3,758,136 
             |     92.72       0.94       3.51       1.49       1.35 |    100.00 
-------------+-------------------------------------------------------+----------
     Current | 1,793,020     31,330     96,352     40,597     46,744 | 2,008,043 
             |     89.29       1.56       4.80       2.02       2.33 |    100.00 
-------------+-------------------------------------------------------+----------
       Total | 9,397,488    146,029    825,958    294,039    260,221 |10,923,735 
             |     86.03       1.34       7.56       2.69       2.38 |    100.00 

. safetab smoke imd,                      row 
10

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |          Index of Multiple Deprivation (IMD)
      status | 1 least d          2          3          4  5 most de |     Total
-------------+-------------------------------------------------------+----------
       Never | 1,584,537  1,476,985  1,412,482  1,302,654  1,029,412 | 6,806,070 
             |     23.28      21.70      20.75      19.14      15.12 |    100.00 
-------------+-------------------------------------------------------+----------
      Former | 1,062,324  1,052,647  1,034,181    930,238    754,645 | 4,834,035 
             |     21.98      21.78      21.39      19.24      15.61 |    100.00 
-------------+-------------------------------------------------------+----------
     Current |   306,756    404,526    509,135    642,531    767,228 | 2,630,176 
             |     11.66      15.38      19.36      24.43      29.17 |    100.00 
-------------+-------------------------------------------------------+----------
       Total | 2,953,617  2,934,158  2,955,798  2,875,423  2,551,285 |14,270,281 
             |     20.70      20.56      20.71      20.15      17.88 |    100.00 

. safetab smoke hypertension, row 
19

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

             |       Diagnosed
     Smoking |     hypertension
      status |         0          1 |     Total
-------------+----------------------+----------
       Never | 5,491,246  1,314,824 | 6,806,070 
             |     80.68      19.32 |    100.00 
-------------+----------------------+----------
      Former | 3,308,661  1,525,374 | 4,834,035 
             |     68.45      31.55 |    100.00 
-------------+----------------------+----------
     Current | 2,255,077    375,099 | 2,630,176 
             |     85.74      14.26 |    100.00 
-------------+----------------------+----------
       Total |11,054,984  3,215,297 |14,270,281 
             |     77.47      22.53 |    100.00 

. safetab smoke shield,    row 
13

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

     Smoking |  Probable shielding
      status |         0          1 |     Total
-------------+----------------------+----------
       Never | 5,354,467  1,451,603 | 6,806,070 
             |     78.67      21.33 |    100.00 
-------------+----------------------+----------
      Former | 3,409,337  1,424,698 | 4,834,035 
             |     70.53      29.47 |    100.00 
-------------+----------------------+----------
     Current | 1,974,018    656,158 | 2,630,176 
             |     75.05      24.95 |    100.00 
-------------+----------------------+----------
       Total |10,737,822  3,532,459 |14,270,281 
             |     75.25      24.75 |    100.00 

.                       
. safetab ethnicity imd,          row 
14

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

                      |          Index of Multiple Deprivation (IMD)
            Ethnicity | 1 least d          2          3          4  5 most de |     Total
----------------------+-------------------------------------------------------+----------
                White | 2,051,330  2,041,563  1,989,494  1,866,237  1,613,746 | 9,562,370 
                      |     21.45      21.35      20.81      19.52      16.88 |    100.00 
----------------------+-------------------------------------------------------+----------
                Mixed |    19,822     24,492     29,952     36,569     40,727 |   151,562 
                      |     13.08      16.16      19.76      24.13      26.87 |    100.00 
----------------------+-------------------------------------------------------+----------
Asian or Asian Britis |    76,909    103,986    166,427    246,012    258,639 |   851,973 
                      |      9.03      12.21      19.53      28.88      30.36 |    100.00 
----------------------+-------------------------------------------------------+----------
                Black |    20,495     31,738     52,228     82,965    116,745 |   304,171 
                      |      6.74      10.43      17.17      27.28      38.38 |    100.00 
----------------------+-------------------------------------------------------+----------
                Other |    36,350     46,276     55,205     69,112     66,766 |   273,709 
                      |     13.28      16.91      20.17      25.25      24.39 |    100.00 
----------------------+-------------------------------------------------------+----------
                Total | 2,204,906  2,248,055  2,293,306  2,300,895  2,096,623 |11,143,785 
                      |     19.79      20.17      20.58      20.65      18.81 |    100.00 

. safetab shield imd,             row 
11

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

  Probable |          Index of Multiple Deprivation (IMD)
 shielding | 1 least d          2          3          4  5 most de |     Total
-----------+-------------------------------------------------------+----------
         0 | 2,301,869  2,298,515  2,327,634  2,282,545  2,016,586 |11,227,149 
           |     20.50      20.47      20.73      20.33      17.96 |    100.00 
-----------+-------------------------------------------------------+----------
         1 |   740,207    732,533    734,261    707,417    652,843 | 3,567,261 
           |     20.75      20.53      20.58      19.83      18.30 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 3,042,076  3,031,048  3,061,895  2,989,962  2,669,429 |14,794,410 
           |     20.56      20.49      20.70      20.21      18.04 |    100.00 

. 
. safetab shield ethnicity,               row 
17

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

  Probable |                       Ethnicity
 shielding |     White      Mixed  Asian or       Black      Other |     Total
-----------+-------------------------------------------------------+----------
         0 | 7,083,442    121,398    718,149    251,109    244,339 | 8,418,437 
           |     84.14       1.44       8.53       2.98       2.90 |    100.00 
-----------+-------------------------------------------------------+----------
         1 | 2,478,928     30,164    133,824     53,062     29,370 | 2,725,348 
           |     90.96       1.11       4.91       1.95       1.08 |    100.00 
-----------+-------------------------------------------------------+----------
     Total | 9,562,370    151,562    851,973    304,171    273,709 |11,143,785 
           |     85.81       1.36       7.65       2.73       2.46 |    100.00 

. 
. /* SENSE CHECK OUTCOMES=======================================================*/
. 
. safetab worms
0

Failure/cen |
     soring |
  indicator |
        for |
   outcome: |
      worms |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 14,583,783       98.58       98.58
          1 |    210,627        1.42      100.00
------------+-----------------------------------
      Total | 14,794,410      100.00

. 
. 
. * Close log file 
. log close
      name:  <unnamed>
       log:  e:\analyses\school-age-children-and-covid\analysis\log\WORMS_02_an_data_checks.log
  log type:  text
 closed on:   7 Aug 2020, 02:08:35
----------------------------------------------------------------------------------------------------------------------------------
